function setInitialTheme(){const e=localStorage.getItem("theme");e?document.documentElement.setAttribute("data-theme",e):window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light")}document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger);const e=document.querySelector(".chapter__scroll"),t=document.querySelector(".chapter__wrapper"),r=gsap.utils.toArray(".chapter__item");ScrollTrigger.create({scroller:e,horizontal:!0,start:0,end:()=>e.scrollWidth-e.clientWidth,onUpdate:e=>{const r=e.progress>=.999;t.classList.toggle("at-end",r)}});const o=e.getBoundingClientRect();r.filter(e=>{const t=e.getBoundingClientRect();return!(t.left>=o.left&&t.right<=o.right)}).forEach(t=>{gsap.timeline({scrollTrigger:{scroller:e,trigger:t,horizontal:!0,start:"left 85%",once:!0}}).from([t.querySelector(".chapter__photo"),t.querySelector(".chapter__texture")],{opacity:0,filter:"blur(20px)",duration:.75}).from(t.querySelector(".chapter__photo"),{scale:1.5,duration:.75},"<").from([t.querySelector(".chapter__header"),t.querySelector(".chapter__footer")],{opacity:0,duration:.25},"-=0.15").from(t.querySelector(".chapter__header"),{x:20,duration:.25},"<")})}),document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelectorAll("#main-nav a");let t=null;e.forEach((e,r)=>{(e.classList.contains("active")||"page"===e.getAttribute("aria-current"))&&(t=`--nav-${r+1}`),e.addEventListener("mouseenter",()=>{document.documentElement.style.setProperty("--active-anchor",`--nav-${r+1}`)}),e.addEventListener("mouseleave",()=>{t?document.documentElement.style.setProperty("--active-anchor",t):document.documentElement.style.removeProperty("--active-anchor")})}),t?document.documentElement.style.setProperty("--active-anchor",t):document.documentElement.style.removeProperty("--active-anchor")}),setInitialTheme(),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme").querySelectorAll('input[type="radio"]'),t=document.getElementById("hueSlider"),r=document.getElementById("hueValue");function o(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)}function n(){const e=t.value;document.documentElement.style.setProperty("--hue",e),r.textContent=e,localStorage.setItem("hue",e),t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",`${e} degrees`)}e.forEach(e=>{e.addEventListener("change",e=>{"auto"===e.target.value?o(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):o(e.target.value)})}),t.addEventListener("input",n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{document.querySelector('input[value="auto"]').checked&&o(e.matches?"dark":"light")}),function(){const e=localStorage.getItem("theme"),r=localStorage.getItem("hue");e?document.querySelector(`input[value="${e}"]`).checked=!0:document.querySelector('input[value="auto"]').checked=!0,r&&(t.value=r,n())}()}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".toggle").forEach(e=>{e.addEventListener("click",()=>{const t=document.getElementById(e.dataset.target);t&&"tooltip"===t.getAttribute("role")?(document.querySelectorAll('[role="tooltip"]:not(.hidden)').forEach(e=>{if(e!==t){e.classList.add("hidden"),e.classList.remove("visible");const t=document.querySelector(`[data-target="${e.id}"]`);t&&t.setAttribute("aria-expanded","false")}}),t.classList.toggle("hidden"),t.classList.toggle("visible"),e.setAttribute("aria-expanded","true"!==e.getAttribute("aria-expanded"))):(t.classList.toggle("hidden"),t.classList.toggle("visible"),e.setAttribute("aria-expanded","true"!==e.getAttribute("aria-expanded")))})})}),document.addEventListener("DOMContentLoaded",()=>{function e(){const e=document.querySelector("details");e&&(window.innerWidth>=820?e.setAttribute("open",""):e.removeAttribute("open"))}window.addEventListener("load",e),window.addEventListener("resize",e)});